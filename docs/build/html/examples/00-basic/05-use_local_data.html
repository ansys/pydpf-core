
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Bring a Field’s Data Locally to Improve Performance &#8212; PyDPF-Core 0.6.dev0 documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Load Plugin" href="06-load_plugin.html" />
    <link rel="prev" title="Write/Load and Upload/Download a Result File" href="04-basic-load-file.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><style>
    .navbar-light {
        background-color: black !important;
    }
</style>

<div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="https://dpfdocs.pyansys.com/">
  <img src="../../_static/pyansys-logo-black-cropped.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon" >
      <i class="fas fa-bars" style="color:#fff; font-size:28px;"></i>
    </span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../getting_started/index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../user_guide/index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api/index.html">
  APIs
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../operator_reference.html">
  Operators
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../contributing.html">
  Contributing
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/DPF-Core" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="00-basic_example.html">
   Basic DPF-Core Usage
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01-basic_operators.html">
   Operators Overview
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="02-basic_field_containers.html">
   Field and Field Containers Overview
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="03-create_entities.html">
   Create Your Own Entities Use DPF Operators
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="04-basic-load-file.html">
   Write/Load and Upload/Download a Result File
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Bring a Field’s Data Locally to Improve Performance
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="06-load_plugin.html">
   Load Plugin
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="07-use_result_helpers.html">
   Use Result Helpers to Load Custom Data
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="08-results_over_time_subset.html">
   Scope results over custom time domains
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="09-results_over_space_subset.html">
   Scope results over custom space domains
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../01-static-transient/00-basic_transient.html">
   Transient Analysis Result Example
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../01-static-transient/01-transient_easy_time_scoping.html">
   Choose a Time Scoping for a Transient Analysis
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../02-modal-harmonic/00-multi_harmonic.html">
   Multi-Harmonic Response Example
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../02-modal-harmonic/01-modal_cyclic.html">
   Modal Cyclic symmetry Example
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../02-modal-harmonic/02-cyclic_multi_stage.html">
   Multi-stage Cyclic Symmetry Example
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../02-modal-harmonic/03-compare_modes.html">
   Use Result Helpers to compare mode shapes for solids and then shells
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../02-modal-harmonic/04-modal_superposition.html">
   Expand Harmonic Modal Superposition with DPF
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../02-modal-harmonic/05-read_distributed_files.html">
   Read results from distributed files
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../03-advanced/00-multistage_advanced_options.html">
   Multi-stage Cyclic Symmetry Use Advanced Customization
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../03-advanced/01-solve_harmonic_problem.html">
   Solve Harmonic Problem (with damping) Using Matrix Inverse
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../03-advanced/02-volume_averaged_stress.html">
   Average Elemental Stress on a given volume
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../03-advanced/03-exchange_data_between_servers.html">
   Exchange Data Between Servers
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../03-advanced/04-extrapolation_stress_3d.html">
   Extrapolation Method for stress result of 3D-element
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../03-advanced/05-extrapolation_strain_2d.html">
   Extrapolation Method for strain result of 2D-element
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../04-specific-requests/00-hdf5_double_float_comparison.html">
   Hdf5 export and compare precision
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../04-specific-requests/01-reduced_matrices_export.html">
   Get reduced matrices and make export
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../05-plotting/00-plot_on_path.html">
   Plot results on a specific path
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../05-plotting/01-compare_results.html">
   Compare Results Using the Plotter
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../06-distributed-post/00-distributed_total_disp.html">
   Distributed post without client connection to remote processes
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../06-distributed-post/01-distributed_delegate_to_server.html">
   Compute total displacement from distributed files with distributed post
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../06-distributed-post/02-distributed_workflows_on_remote.html">
   Connect workflows on different processes implicitly
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../06-distributed-post/03-distributed-msup_expansion.html">
   Distributed modal superposition
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../06-distributed-post/04-distributed-msup_expansion_steps.html">
   Distributed msup distributed modal response
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../06-distributed-post/05-distributed_total_disp_with_operators.html">
   Distributed post without client connection to remote processes with Operators
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../07-python-operators/00-wrapping_numpy_capabilities.html">
   Write user defined Operator
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../07-python-operators/01-package_python_operators.html">
   Write user defined Operators as a package
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../07-python-operators/02-python_operators_with_dependencies.html">
   Write user defined Operators having third party dependencies
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Bring a Field’s Data Locally to Improve Performance
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-the-workflow">
   Create the Workflow
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#manipulate-data-locally">
   Manipulate Data Locally
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plot-result-field">
   Plot Result Field
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plot-initial-invariants">
   Plot Initial Invariants
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-00-basic-05-use-local-data-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="bring-a-field-s-data-locally-to-improve-performance">
<span id="ref-use-local-data-example"></span><span id="sphx-glr-examples-00-basic-05-use-local-data-py"></span><h1>Bring a Field’s Data Locally to Improve Performance<a class="headerlink" href="#bring-a-field-s-data-locally-to-improve-performance" title="Permalink to this headline">¶</a></h1>
<p>Reducing the number of calls to the server is key to improving
performance. Using the <code class="docutils literal notranslate"><span class="pre">as_local_field</span></code> option brings the data
from the server to your local machine where you can work on it.
When finished, you send the updated data back to the server
in one transaction.</p>
<p>Import necessary modules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansys.dpf</span> <span class="kn">import</span> <span class="n">core</span> <span class="k">as</span> <span class="n">dpf</span>
<span class="kn">from</span> <span class="nn">ansys.dpf.core</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="kn">from</span> <span class="nn">ansys.dpf.core</span> <span class="kn">import</span> <span class="n">operators</span> <span class="k">as</span> <span class="n">ops</span>
</pre></div>
</div>
<p>Create a model object to establish a connection with an
example result file and then extract:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">download_multi_stage_cyclic_result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF Model
------------------------------
Modal analysis
Unit system: MKS: m, kg, N, s, V, A, degC
Physics Type: Mecanic
Available results:
     -  displacement: Nodal Displacement
     -  stress: ElementalNodal Stress
     -  elastic_strain: ElementalNodal Strain
     -  structural_temperature: ElementalNodal Temperature
------------------------------
DPF  Meshed Region:
  3595 nodes
  1557 elements
  Unit: m
  With solid (3D) elements
------------------------------
DPF  Time/Freq Support:
  Number of sets: 6
Cumulative     Frequency (Hz) LoadStep       Substep        Harmonic index
1              188.385357     1              1              0.000000
2              325.126418     1              2              0.000000
3              595.320548     1              3              0.000000
4              638.189511     1              4              0.000000
5              775.669703     1              5              0.000000
6              928.278013     1              6              0.000000
</pre></div>
</div>
</section>
<section id="create-the-workflow">
<h1>Create the Workflow<a class="headerlink" href="#create-the-workflow" title="Permalink to this headline">¶</a></h1>
<p>Maximum principal stress usually occurs on the skin of the
model. Computing results only on this skin reduces the data size.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a simple workflow computing the principal stress on the skin</span>
<span class="c1"># of the model.</span>

<span class="n">skin_op</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">external_layer</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">meshed_region</span><span class="p">)</span>
<span class="n">skin_mesh</span> <span class="o">=</span> <span class="n">skin_op</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">mesh</span><span class="p">()</span>
</pre></div>
</div>
<p>Plot the mesh skin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">skin_mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<ul class="sphx-glr-horizontal">
<li><img src="../../_images/sphx_glr_05-use_local_data_001.png" srcset="../../_images/sphx_glr_05-use_local_data_001.png" alt="05 use local data" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_05-use_local_data_002.png" srcset="../../_images/sphx_glr_05-use_local_data_002.png" alt="05 use local data" class = "sphx-glr-multi-img"/></li>
</ul>
<p>Compute the stress principal inveriants on the skin nodes only:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stress_op</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">stress</span><span class="p">(</span><span class="n">data_sources</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">data_sources</span><span class="p">)</span>
<span class="n">stress_op</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">requested_location</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dpf</span><span class="o">.</span><span class="n">locations</span><span class="o">.</span><span class="n">nodal</span><span class="p">)</span>
<span class="n">stress_op</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mesh_scoping</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">skin_op</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">nodes_mesh_scoping</span><span class="p">)</span>

<span class="n">principal_op</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">invariant</span><span class="o">.</span><span class="n">principal_invariants_fc</span><span class="p">(</span><span class="n">stress_op</span><span class="p">)</span>
<span class="n">principal_stress_1</span> <span class="o">=</span> <span class="n">principal_op</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">fields_eig_1</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">principal_stress_2</span> <span class="o">=</span> <span class="n">principal_op</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">fields_eig_2</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">principal_stress_3</span> <span class="o">=</span> <span class="n">principal_op</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">fields_eig_3</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="manipulate-data-locally">
<h1>Manipulate Data Locally<a class="headerlink" href="#manipulate-data-locally" title="Permalink to this headline">¶</a></h1>
<p>This example goes over the fields, keeping the largest invariant value
by node if the averaged value of invariants is large enough.
Exploring data allows you to customize it to meet your needs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">node_scoping_ids</span> <span class="o">=</span> <span class="n">principal_stress_1</span><span class="o">.</span><span class="n">scoping</span><span class="o">.</span><span class="n">ids</span>
<span class="n">threshold</span> <span class="o">=</span> <span class="mf">300000.0</span>

<span class="n">field_to_keep</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">fields_factory</span><span class="o">.</span><span class="n">create_scalar_field</span><span class="p">(</span>
    <span class="nb">len</span><span class="p">(</span><span class="n">node_scoping_ids</span><span class="p">),</span> <span class="n">location</span><span class="o">=</span><span class="n">dpf</span><span class="o">.</span><span class="n">locations</span><span class="o">.</span><span class="n">nodal</span>
<span class="p">)</span>

<span class="k">with</span> <span class="n">field_to_keep</span><span class="o">.</span><span class="n">as_local_field</span><span class="p">()</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">principal_stress_1</span><span class="o">.</span><span class="n">as_local_field</span><span class="p">()</span> <span class="k">as</span> <span class="n">s1</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">principal_stress_2</span><span class="o">.</span><span class="n">as_local_field</span><span class="p">()</span> <span class="k">as</span> <span class="n">s2</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">principal_stress_3</span><span class="o">.</span><span class="n">as_local_field</span><span class="p">()</span> <span class="k">as</span> <span class="n">s3</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="nb">id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">node_scoping_ids</span><span class="p">):</span>
                    <span class="n">d1</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">s1</span><span class="o">.</span><span class="n">get_entity_data_by_id</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>
                    <span class="n">d2</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">s2</span><span class="o">.</span><span class="n">get_entity_data_by_id</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>
                    <span class="n">d3</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">s3</span><span class="o">.</span><span class="n">get_entity_data_by_id</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">d1</span> <span class="o">+</span> <span class="n">d2</span> <span class="o">+</span> <span class="n">d3</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">:</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">d3</span><span class="p">)</span>
                        <span class="n">f</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="plot-result-field">
<h1>Plot Result Field<a class="headerlink" href="#plot-result-field" title="Permalink to this headline">¶</a></h1>
<p>Plot the result field on the skin mesh:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">skin_mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">field_to_keep</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_05-use_local_data_003.png" srcset="../../_images/sphx_glr_05-use_local_data_003.png" alt="05 use local data" class = "sphx-glr-single-img"/></section>
<section id="plot-initial-invariants">
<h1>Plot Initial Invariants<a class="headerlink" href="#plot-initial-invariants" title="Permalink to this headline">¶</a></h1>
<p>Plot the initial invariants on the skin mesh:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">skin_mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">principal_stress_1</span><span class="p">)</span>
<span class="n">skin_mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">principal_stress_2</span><span class="p">)</span>
<span class="n">skin_mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">principal_stress_3</span><span class="p">)</span>
</pre></div>
</div>
<ul class="sphx-glr-horizontal">
<li><img src="../../_images/sphx_glr_05-use_local_data_004.png" srcset="../../_images/sphx_glr_05-use_local_data_004.png" alt="05 use local data" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_05-use_local_data_005.png" srcset="../../_images/sphx_glr_05-use_local_data_005.png" alt="05 use local data" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_05-use_local_data_006.png" srcset="../../_images/sphx_glr_05-use_local_data_006.png" alt="05 use local data" class = "sphx-glr-multi-img"/></li>
</ul>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  5.583 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-00-basic-05-use-local-data-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/588398b53425e5d702dbb6eb2434ee16/05-use_local_data.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">05-use_local_data.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/f9d114f85aa34fa9c4ca544dc2530343/05-use_local_data.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">05-use_local_data.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright (c) 2022 ANSYS, Inc. All rights reserved.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>
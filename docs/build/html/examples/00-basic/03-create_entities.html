
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create your own entities to use dpf’s operators &#8212; PyANSYS DPF 0.2.2 documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.ee6fb81b276d6fba8a971ad8e9b95dd9.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/ansys.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.c86189f1ce1b71a67eb6.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Write/load and upload/download a result file" href="04-basic-load-file.html" />
    <link rel="prev" title="Field and Field Containers Overview" href="02-basic_field_containers.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/pyansys-logo-black-cropped.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../getting_started/index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../user_guide/index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api/index.html">
  APIs
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../operator_reference.html">
  Operators
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  Examples Gallery
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../contributing.html">
  Contributing
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/DPF-Core" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="00-basic_example.html">
   Basic DPF-Core Usage
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01-basic_operators.html">
   Operators Overview
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="02-basic_field_containers.html">
   Field and Field Containers Overview
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Create your own entities to use dpf’s operators
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="04-basic-load-file.html">
   Write/load and upload/download a result file
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="05-use_local_data.html">
   Bring Field’s data locally to improve performances
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="06-load_plugin.html">
   Load plugin
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="06-use_result_helpers.html">
   Use Result Helpers to Load Custom Data
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../01-static-transient/00-basic_transient.html">
   Transient Analysis Result Example
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../01-static-transient/01-transient_easy_time_scoping.html">
   Go Easily over Times Tranient Analysis
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../02-modal-harmonic/00-multi_harmonic.html">
   Multi-Harmonic Response Example
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../02-modal-harmonic/01-modal_cyclic.html">
   Modal Cyclic symmetry Example
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../02-modal-harmonic/02-cyclic_multi_stage.html">
   Multi-stage Cyclic Symmetry Example
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../02-modal-harmonic/03-compare_modes.html">
   Use Result Helpers to compare mode shapes for solids and then shells
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../03-advanced/00-multistage_advanced_options.html">
   Multi-stage Cyclic Symmetry Use Advanced Customization
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../03-advanced/01-solve_harmonic_problem.html">
   Solve Harmonic Problem (with damping) Using Matrix Inverse
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../03-advanced/02-volume_averaged_stress.html">
   Average Elemental Stress on a given volume
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../03-advanced/03-exchange_data_between_servers.html">
   Exchange Data Between Servers
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../04-specific-requests/00-hdf5_double_float_comparison.html">
   Hdf5 export and compare precision
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../04-specific-requests/01-reduced_matrices_export.html">
   Get reduced matrices and make export
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                

<nav id="bd-toc-nav">
    
</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-00-basic-03-create-entities-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="create-your-own-entities-to-use-dpf-s-operators">
<span id="ref-create-entities-example"></span><span id="sphx-glr-examples-00-basic-03-create-entities-py"></span><h1>Create your own entities to use dpf’s operators<a class="headerlink" href="#create-your-own-entities-to-use-dpf-s-operators" title="Permalink to this headline">¶</a></h1>
<p>Create your own entities: field/fields container/meshed region
to use dpf’operators with your own data
The ability to create any of dpf’s entity in scripting allows to not depend on result files
and to connect dpf’s environement with any python tools.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">ansys.dpf</span> <span class="kn">import</span> <span class="n">core</span> <span class="k">as</span> <span class="n">dpf</span>
<span class="kn">from</span> <span class="nn">ansys.dpf.core</span> <span class="kn">import</span> <span class="n">operators</span> <span class="k">as</span> <span class="n">ops</span>
</pre></div>
</div>
<p>Here a parallelepiped mesh made of linear hexa will be created</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">length</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">width</span> <span class="o">=</span> <span class="mf">0.05</span>
<span class="n">depth</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">num_nodes_in_length</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">num_nodes_in_width</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">num_nodes_in_depth</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">MeshedRegion</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">search_sequence_numpy</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="n">seq</span><span class="p">):</span>
    <span class="n">indexes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="n">seq</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">nditer</span><span class="p">(</span><span class="n">indexes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">index</span><span class="o">%</span><span class="mi">3</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="n">seq</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">2</span><span class="p">],</span><span class="n">seq</span><span class="p">[</span><span class="mi">2</span><span class="p">]):</span>
                <span class="k">return</span> <span class="n">index</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
<p>Add nodes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span> <span class="o">=</span><span class="mi">1</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">*</span><span class="n">length</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">num_nodes_in_length</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_nodes_in_length</span><span class="p">)]):</span>
    <span class="k">for</span> <span class="n">j</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">*</span><span class="n">width</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">num_nodes_in_width</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_nodes_in_width</span><span class="p">)]):</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">z</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">*</span><span class="n">depth</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">num_nodes_in_depth</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_nodes_in_depth</span><span class="p">)]):</span>
            <span class="n">mesh</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">])</span>
            <span class="nb">id</span> <span class="o">+=</span><span class="mi">1</span>
</pre></div>
</div>
<p>Get nodes coordinates field</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">coordinates</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">coordinates_field</span>
</pre></div>
</div>
<p>Set the mesh unit</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mesh</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="s2">&quot;mm&quot;</span>

<span class="n">coordinates_data</span> <span class="o">=</span> <span class="n">coordinates</span><span class="o">.</span><span class="n">data</span>
<span class="n">flat_coordinates_data</span> <span class="o">=</span> <span class="n">coordinates_data</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">coordinates_data</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
<span class="n">coordinates_scoping</span> <span class="o">=</span> <span class="n">coordinates</span><span class="o">.</span><span class="n">scoping</span>
</pre></div>
</div>
<p>Add solid elements (linear hexa with 8 nodes)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span> <span class="o">=</span><span class="mi">1</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">*</span><span class="n">length</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">num_nodes_in_length</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_nodes_in_length</span><span class="o">-</span><span class="mi">1</span><span class="p">)]):</span>
    <span class="k">for</span> <span class="n">j</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">*</span><span class="n">width</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">num_nodes_in_width</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_nodes_in_width</span><span class="o">-</span><span class="mi">1</span><span class="p">)]):</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">z</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">*</span><span class="n">depth</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">num_nodes_in_depth</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_nodes_in_depth</span><span class="o">-</span><span class="mi">1</span><span class="p">)]):</span>
            <span class="n">coord1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">])</span>
            <span class="n">connectivity</span><span class="o">=</span><span class="p">[]</span>
            <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span> <span class="n">length</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">num_nodes_in_length</span><span class="p">)]:</span>
                <span class="k">for</span> <span class="n">yy</span> <span class="ow">in</span> <span class="p">[</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="o">+</span> <span class="n">width</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">num_nodes_in_width</span><span class="p">)]:</span>
                    <span class="k">for</span> <span class="n">zz</span> <span class="ow">in</span> <span class="p">[</span><span class="n">z</span><span class="p">,</span> <span class="n">z</span><span class="o">+</span> <span class="n">depth</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">num_nodes_in_depth</span><span class="p">)]:</span>
                        <span class="n">data_index</span> <span class="o">=</span> <span class="n">search_sequence_numpy</span><span class="p">(</span><span class="n">flat_coordinates_data</span><span class="p">,[</span><span class="n">xx</span><span class="p">,</span><span class="n">yy</span><span class="p">,</span><span class="n">zz</span><span class="p">])</span>
                        <span class="n">scoping_index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data_index</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span> <span class="c1">#3components</span>
                        <span class="n">connectivity</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scoping_index</span><span class="p">)</span>
            <span class="c1">#rearrange connectivity</span>
            <span class="n">tmp</span> <span class="o">=</span><span class="n">connectivity</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">connectivity</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span><span class="n">connectivity</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">connectivity</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">connectivity</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
            <span class="n">connectivity</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span><span class="n">connectivity</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
            <span class="n">connectivity</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span><span class="n">tmp</span>
            <span class="n">mesh</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">add_solid_element</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">connectivity</span><span class="p">)</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<img alt="03 create entities" class="sphx-glr-single-img" src="../../_images/sphx_glr_03-create_entities_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[(0.19380692678179334, 0.16880692678179335, 0.19380692678179334),
 (0.045, 0.02, 0.045),
 (0.0, 0.0, 1.0)]
</pre></div>
</div>
<p>Create displacement fields over time with 3 time sets
Here the displacement on each node will be the value of its x,y,z coordinates for time 1
the displacement on each node will be twice the value of its x,y,z coordinates for time 2
the displacement on each node will be three time the value of its x,y,z coordinates for time 3</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">num_nodes</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">n_nodes</span>
<span class="n">time1_array</span> <span class="o">=</span> <span class="n">coordinates_data</span>
<span class="n">time2_array</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span><span class="n">coordinates_data</span>
<span class="n">time3_array</span> <span class="o">=</span> <span class="mf">3.0</span> <span class="o">*</span><span class="n">coordinates_data</span>

<span class="n">time1_field</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">fields_factory</span><span class="o">.</span><span class="n">create_3d_vector_field</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
<span class="n">time2_field</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">fields_factory</span><span class="o">.</span><span class="n">create_3d_vector_field</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
<span class="n">time3_field</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">fields_factory</span><span class="o">.</span><span class="n">create_3d_vector_field</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>

<span class="n">time1_field</span><span class="o">.</span><span class="n">scoping</span> <span class="o">=</span> <span class="n">coordinates</span><span class="o">.</span><span class="n">scoping</span>
<span class="n">time2_field</span><span class="o">.</span><span class="n">scoping</span> <span class="o">=</span> <span class="n">coordinates</span><span class="o">.</span><span class="n">scoping</span>
<span class="n">time3_field</span><span class="o">.</span><span class="n">scoping</span> <span class="o">=</span> <span class="n">coordinates</span><span class="o">.</span><span class="n">scoping</span>

<span class="n">time1_field</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">time1_array</span>
<span class="n">time2_field</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">time2_array</span>
<span class="n">time3_field</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">time3_array</span>

<span class="n">time1_field</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">unit</span>
<span class="n">time2_field</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">unit</span>
<span class="n">time3_field</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">unit</span>
</pre></div>
</div>
<p>Create results over times in a fields container with its time freq support</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fc</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">fields_container_factory</span><span class="o">.</span><span class="n">over_time_freq_fields_container</span><span class="p">({</span><span class="mf">0.1</span><span class="p">:</span><span class="n">time1_field</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">:</span><span class="n">time2_field</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">:</span><span class="n">time3_field</span><span class="p">},</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Check that the time freq support has been built</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">fc</span><span class="o">.</span><span class="n">time_freq_support</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF  Time/Freq Support:
  Number of sets: 3
Cumulative     Time (s)       LoadStep       Substep
1              0.100000       1              1
2              0.200000       1              2
3              0.300000       1              3
</pre></div>
</div>
<p>Plot the norm over time of our fields container</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">norm</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">norm_fc</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span>
<span class="n">fc_norm</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">fields_container</span><span class="p">()</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fc_norm</span><span class="o">.</span><span class="n">get_field_by_time_complex_ids</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fc_norm</span><span class="o">.</span><span class="n">get_field_by_time_complex_ids</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fc_norm</span><span class="o">.</span><span class="n">get_field_by_time_complex_ids</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<ul class="sphx-glr-horizontal">
<li><img alt="03 create entities" class="sphx-glr-multi-img" src="../../_images/sphx_glr_03-create_entities_002.png" />
</li>
<li><img alt="03 create entities" class="sphx-glr-multi-img" src="../../_images/sphx_glr_03-create_entities_003.png" />
</li>
<li><img alt="03 create entities" class="sphx-glr-multi-img" src="../../_images/sphx_glr_03-create_entities_004.png" />
</li>
</ul>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[(0.19380692678179334, 0.16880692678179335, 0.19380692678179334),
 (0.045, 0.02, 0.045),
 (0.0, 0.0, 1.0)]
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  5.667 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-00-basic-03-create-entities-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/8e0366e1a90373804ae4d1e5538d3c15/03-create_entities.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">03-create_entities.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/e6ef33e43a330c5f8b87ea5fe4caede6/03-create_entities.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">03-create_entities.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="02-basic_field_containers.html" title="previous page">Field and Field Containers Overview</a>
    <a class='right-next' id="next-link" href="04-basic-load-file.html" title="next page">Write/load and upload/download a result file</a>

              </div>
              
          </main>
          

      </div>
    </div>
    
  <script src="../../_static/js/index.c86189f1ce1b71a67eb6.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, ANSYS.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Fields container and fields &#8212; PyDPF-Core</title>
    
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css\ansys_sphinx_theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    
        <link href="../_static/css/breadcrumbs.css" rel="stylesheet">
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../_static/ansys-favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Plot" href="plotting.html" />
    <link rel="prev" title="Operators" href="operators.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../getting_started/index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../concepts/index.html">
  Concepts
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/index.html">
  API reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../operator_reference.html">
  Operators
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../examples/index.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../contributing.html">
  Contribute
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        dev  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables user_guide/fields_container and {'json_url': 'https://nocname.com/release/versions.json', 'version_match': 'dev'}.
-->

<script type="text/javascript">
// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "user_guide/fields_container.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://nocname.com/release/versions.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "user_guide/fields_container.html";
        let btn = document.getElementById("version_switcher_button");
        // Set empty strings by default so that these attributes exist and can be used in CSS selectors
        btn.dataset["activeVersionName"] = "";
        btn.dataset["activeVersion"] = "";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            // Add dataset values for the version and name in case people want
            // to apply CSS styling based on this information.
            node.dataset["versionName"] = entry.name;
            node.dataset["version"] = entry.version;

            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's 0.7.3.dev0 variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "dev") {
                node.classList.add("active");
                btn.innerText = btn.dataset["activeVersionName"] = entry.name;
                btn.dataset["activeVersion"] = entry.version;
            }
        });
    });
})();
</script>
      </div>
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/pydpf-core" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    
     
<div id="announcement_msg"></div>
<script>
  fetch("announcement.html")
    .then((response) => {
      if (!response.ok) {
        throw new Error(`HTTP error: ${response.status}`);
      }
      return response.text();
    })
    .then(text => document.getElementById("announcement_msg").innerHTML = text)
    .catch((error) => console.error(`Fetch problem: ${error.message}`));
</script>

    
        <div class="container-xl">
    <div class="row">
        <div class="col-12 col-md-3" id="breadcrumbs-spacer"></div>
        <div class="col-12 col-md-11 col-xl-9" id="breadcrumbs">
          
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    
        <li class="nav-item nav-item-additional-breadcrumb"><a href="https://docs.pyansys.com/">PyAnsys</a> » </li>
    
    
        <li class="nav-item nav-item-0"><a href="../index.html">PyDPF-Core</a> » </li>
    

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">User guide</a> » </li>
        <li class="nav-item nav-item-this"><a href="">Fields container and fields</a></li> 
      </ul>
    </div>
        </div>
  </div>
</div>
    


    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#access-a-fields-container-or-field">
   Access a fields container or field
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#access-fields-within-a-fields-container">
   Access fields within a fields container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#field-data">
   Field data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#field-metadata">
   Field metadata
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#access-field-data">
   Access field data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#operate-on-field-data">
   Operate on field data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api-reference">
   API reference
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="fields-container-and-fields">
<span id="ref-user-guide-fields-container"></span><h1>Fields container and fields<a class="headerlink" href="#fields-container-and-fields" title="Permalink to this heading">#</a></h1>
<p>While DPF uses operators to load and operate on data, it uses field containers
and fields to store and return data. In other words, operators are like verbs,
acting on the data, while field containers and fields are like nouns, objects
that hold data.</p>
<section id="access-a-fields-container-or-field">
<h2>Access a fields container or field<a class="headerlink" href="#access-a-fields-container-or-field" title="Permalink to this heading">#</a></h2>
<p>The outputs from operators can be either a
<code class="xref py py-class docutils literal notranslate"><span class="pre">ansys.dpf.core.fields_container.FieldsContainer</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">ansys.dpf.core.field.Field</span></code> class.</p>
<p>A fields container is the DPF equivalent of a list of fields. It holds a
vector of fields.</p>
<p>This example uses the <code class="docutils literal notranslate"><span class="pre">elastic_strain</span></code> operator to access a fields container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansys.dpf</span> <span class="kn">import</span> <span class="n">core</span> <span class="k">as</span> <span class="n">dpf</span>
<span class="kn">from</span> <span class="nn">ansys.dpf.core</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">find_msup_transient</span><span class="p">())</span>
<span class="n">epel</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">elastic_strain</span><span class="o">.</span><span class="n">on_all_time_freqs</span>
<span class="n">fields</span> <span class="o">=</span> <span class="n">epel</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF elastic_strain(s)Fields Container
  with 20 field(s)
  defined on labels: time

  with:
  - field 0 {time:  1} with ElementalNodal location, 6 components and 40 entities.
  - field 1 {time:  2} with ElementalNodal location, 6 components and 40 entities.
  - field 2 {time:  3} with ElementalNodal location, 6 components and 40 entities.
  - field 3 {time:  4} with ElementalNodal location, 6 components and 40 entities.
  - field 4 {time:  5} with ElementalNodal location, 6 components and 40 entities.
  - field 5 {time:  6} with ElementalNodal location, 6 components and 40 entities.
  - field 6 {time:  7} with ElementalNodal location, 6 components and 40 entities.
  - field 7 {time:  8} with ElementalNodal location, 6 components and 40 entities.
  - field 8 {time:  9} with ElementalNodal location, 6 components and 40 entities.
  - field 9 {time:  10} with ElementalNodal location, 6 components and 40 entities.
  - field 10 {time:  11} with ElementalNodal location, 6 components and 40 entities.
  - field 11 {time:  12} with ElementalNodal location, 6 components and 40 entities.
  - field 12 {time:  13} with ElementalNodal location, 6 components and 40 entities.
  - field 13 {time:  14} with ElementalNodal location, 6 components and 40 entities.
  - field 14 {time:  15} with ElementalNodal location, 6 components and 40 entities.
  - field 15 {time:  16} with ElementalNodal location, 6 components and 40 entities.
  - field 16 {time:  17} with ElementalNodal location, 6 components and 40 entities.
  - field 17 {time:  18} with ElementalNodal location, 6 components and 40 entities.
  - field 18 {time:  19} with ElementalNodal location, 6 components and 40 entities.
  - field 19 {time:  20} with ElementalNodal location, 6 components and 40 entities.
</pre></div>
</div>
</section>
<section id="access-fields-within-a-fields-container">
<h2>Access fields within a fields container<a class="headerlink" href="#access-fields-within-a-fields-container" title="Permalink to this heading">#</a></h2>
<p>Many methods are available for accessing a field in a fields
container. The preceding results contain a transient
result, which means that the fields container has one field
by time set.</p>
<p>Access the field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>20
</pre></div>
</div>
<p>Access the field based on its index:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">field_first_time</span> <span class="o">=</span> <span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">field_last_time</span> <span class="o">=</span> <span class="n">fields</span><span class="p">[</span><span class="mi">19</span><span class="p">]</span>
</pre></div>
</div>
<p>Access the field based on its time set ID:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">field</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get_field_by_time_id</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>To access fields for more complex requests, you can use the
<code class="docutils literal notranslate"><span class="pre">get_field()</span></code> method with the ID of the requested field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">field</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get_field</span><span class="p">({</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF elastic_strain_0.01s Field
 Location: ElementalNodal
 Unit:
 40 entities
 Data:6 components and 320 elementary data
</pre></div>
</div>
<p>Here is a more real-word example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">download_all_kinds_of_complexity</span><span class="p">())</span>
<span class="n">epel</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">elastic_strain</span><span class="o">.</span><span class="n">on_all_time_freqs</span><span class="o">.</span><span class="n">split_by_shape</span>
<span class="n">fields</span> <span class="o">=</span> <span class="n">epel</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
<span class="n">field</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get_field</span><span class="p">({</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;elshape&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

<span class="n">field</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get_field</span><span class="p">({</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;elshape&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF elastic_strain_1.s_elshape:0 Field
 Location: ElementalNodal
 Unit:
 203 entities
 Data:6 components and 2436 elementary data

DPF elastic_strain_1.s_elshape:1 Field
 Location: ElementalNodal
 Unit:
 9052 entities
 Data:6 components and 37580 elementary data
</pre></div>
</div>
<p>The following example references the available time frequency support to determine which
time complex IDs are available in the fields container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">find_msup_transient</span><span class="p">())</span>
<span class="n">epel</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">elastic_strain</span><span class="o">.</span><span class="n">on_all_time_freqs</span>
<span class="n">fields</span> <span class="o">=</span> <span class="n">epel</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fields</span><span class="o">.</span><span class="n">time_freq_support</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF  Time/Freq Support:
  Number of sets: 20
Cumulative     Time (s)       LoadStep       Substep
1              0.010000       1              1
2              0.020000       1              2
3              0.030000       1              3
4              0.040000       1              4
5              0.050000       1              5
6              0.060000       1              6
7              0.070000       1              7
8              0.080000       1              8
9              0.090000       1              9
10             0.100000       1              10
11             0.110000       1              11
12             0.120000       1              12
13             0.130000       1              13
14             0.140000       1              14
15             0.150000       1              15
16             0.160000       1              16
17             0.170000       1              17
18             0.180000       1              18
19             0.190000       1              19
20             0.200000       1              20
</pre></div>
</div>
<p>Note that the time set IDs used are one-based. When indexing from Pythonic
indexing with <code class="docutils literal notranslate"><span class="pre">fields[0]</span></code>, you can use zero-based indexing. When using
the <code class="docutils literal notranslate"><span class="pre">get_fields()</span></code> method to access results, you should base the request on
time-scoping set IDs.</p>
</section>
<section id="field-data">
<h2>Field data<a class="headerlink" href="#field-data" title="Permalink to this heading">#</a></h2>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">ansys.dpf.core.field.Field</span></code> class is the fundamental unit of data within DPF.
It contains the actual data and its metadata, which is results data defined by values
associated with entities (scoping). These entities are a subset of a model (support).</p>
<p>In DPF, field data is always associated with its scoping and support, making the field
a self-describing piece of data. A field is also defined by other attributes, including
dimensionality, unit, and location.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/field.png"><img alt="../_images/field.png" src="../_images/field.png" style="width: 480.0px; height: 318.59999999999997px;" /></a>
</figure>
<p>You can get an overview of a field’s metadata by printing the field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">field</span> <span class="o">=</span> <span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF elastic_strain_0.01s Field
   Location: ElementalNodal
   Unit:
   40 entities
   Data:6 components and 320 elementary data
</pre></div>
</div>
<p>The next section provides an overview of the metadata associated with the field itself.</p>
</section>
<section id="field-metadata">
<h2>Field metadata<a class="headerlink" href="#field-metadata" title="Permalink to this heading">#</a></h2>
<p>A field contains the metadata for the result it is associated with. The metadata
includes the location (such as <code class="docutils literal notranslate"><span class="pre">Elemental</span></code>, <code class="docutils literal notranslate"><span class="pre">Nodal</span></code>, or
<code class="docutils literal notranslate"><span class="pre">ElementalNodal</span></code>) and the IDs associated with the location.</p>
<p>To access the scoping of the field, use the <code class="docutils literal notranslate"><span class="pre">scoping</span></code> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">scoping</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;field.scoping.ids:&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">scoping</span><span class="o">.</span><span class="n">ids</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;field.location:&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span> DPF scoping:
   with Elemental location and 40 entities

field.scoping.ids: [21,
  22,
  23,
  24,
  25,
  26,
  ...
  ]

  field.location:&#39;ElementalNodal&#39;
</pre></div>
</div>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">Elemental</span></code> location denotes one value of data (multiplied by the number
of components) per element.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Nodal</span></code> location is one value per node.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ElementalNodal</span></code> location is one value per node per element. For example,
strain is an <code class="docutils literal notranslate"><span class="pre">ElementalNodal</span></code> value because strain is evaluated at each node
for each element.</p></li>
</ul>
<p>The field also contains metadata, including the shape of
the data stored, location of the field, number of components, and
units of the data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stress</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">stress</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="n">stress</span><span class="o">.</span><span class="n">eval</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

<span class="go">Units of the field describing volume</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="n">unit</span>


<span class="go">Location of the field (Elemental, ElementalNodal, or Nodal)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="n">location</span>

<span class="go">Number of components associated with the field. It&#39;s expected to</span>
<span class="go">be a single dimension because there can only be one volume per</span>
<span class="go">element.</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="n">component_count</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;Pa&#39;
&#39;ElementalNodal&#39;
6
</pre></div>
</div>
</section>
<section id="access-field-data">
<h2>Access field data<a class="headerlink" href="#access-field-data" title="Permalink to this heading">#</a></h2>
<p>When DPF-Core returns the <code class="xref py py-class docutils literal notranslate"><span class="pre">ansys.dpf.core.field.Field</span></code> class,
what Python actually has is a client-side representation of the field,
not the entirety of the field itself. This means that all the data of
the field is stored within the DPF service. This is important because
when building your postprocessing workflows, the most efficient way of
interacting with result data is to minimize the exchange of data between
Python and DPF, either by using operators or by accessing only the data
that is needed.</p>
<p>If you need to access the entire array of data, request that the data
be returned as a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">array</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">array</span>
<span class="go">array([[ 4.01372930e+04,  3.85071930e+02, -1.40019130e+07,</span>
<span class="go">     7.48472351e+02, -2.60259531e+04, -2.62856938e+05],</span>
<span class="go">   [-1.19228638e+03, -6.18210815e+02, -1.39912700e+07,</span>
<span class="go">     2.61468994e+03, -1.31871719e+05, -2.59527125e+05],</span>
<span class="go">   [ 9.02558960e+02,  5.63793152e+02, -1.17102740e+07,</span>
<span class="go">    -8.99381836e+02, -1.21302727e+05, -2.45666328e+05],</span>
<span class="go">   ...,</span>
<span class="go">   [-3.99694531e+04,  1.44622528e+02,  9.62343100e+06,</span>
<span class="go">    -7.09812073e+02, -2.26106621e+04, -2.23155891e+05],</span>
<span class="go">   [-4.31104401e+02, -2.67612732e+02,  9.60954800e+06,</span>
<span class="go">     1.93208755e+02, -1.11580734e+05, -2.24406062e+05],</span>
<span class="go">   [ 5.56899536e+02,  3.88515320e+02,  1.17119880e+07,</span>
<span class="go">    -1.68983887e+03, -1.21768023e+05, -2.41346125e+05]])</span>

<span class="go">This array has 6 components by elementary data (symmetrical tensor XX,YY,ZZ,XY,YZ,XZ).</span>
<span class="go">Note that this array is a genuine, local, numpy array.</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
<span class="go">numpy.ndarray</span>
</pre></div>
</div>
<p>If you need to access an individual node or element, request it
using either the <code class="docutils literal notranslate"><span class="pre">get_entity_data()</span></code> or <code class="docutils literal notranslate"><span class="pre">get_entity_data_by_id()</span></code> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Get</span> <span class="n">the</span> <span class="n">data</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">first</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">field</span><span class="o">.</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">field</span><span class="o">.</span><span class="n">get_entity_data</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">Get</span> <span class="n">the</span> <span class="n">data</span> <span class="k">for</span> <span class="n">the</span> <span class="n">element</span> <span class="k">with</span> <span class="n">ID</span> <span class="mf">10.</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">field</span><span class="o">.</span><span class="n">get_entity_data_by_id</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">array</span><span class="p">([[</span> <span class="mf">4.99232031e+04</span><span class="p">,</span>  <span class="mf">1.93570602e+02</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.08514075e+06</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">5.48255615e+02</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.37476562e+04</span><span class="p">,</span>  <span class="mf">1.34827719e+05</span><span class="p">],</span>
   <span class="p">[</span> <span class="mf">5.23090469e+04</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.87847885e+02</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.98004588e+06</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">1.12942969e+03</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.11147285e+04</span><span class="p">,</span>  <span class="mf">1.09223398e+05</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">4.90510511e+00</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.16425255e+02</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.96296662e+06</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">5.48878540e+02</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.48524844e+04</span><span class="p">,</span>  <span class="mf">1.09255164e+05</span><span class="p">],</span>
   <span class="p">[</span> <span class="mf">2.63994884e+01</span><span class="p">,</span>  <span class="mf">1.50431015e+02</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.06906050e+06</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">1.17046680e+03</span><span class="p">,</span> <span class="o">-</span><span class="mf">6.76924219e+04</span><span class="p">,</span>  <span class="mf">1.34773391e+05</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">4.99232031e+04</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.93571167e+02</span><span class="p">,</span>  <span class="mf">3.08514075e+06</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">5.48256836e+02</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.37476562e+04</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.34827719e+05</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">5.23090469e+04</span><span class="p">,</span>  <span class="mf">1.87848083e+02</span><span class="p">,</span>  <span class="mf">1.98004588e+06</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">1.12943201e+03</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.11147295e+04</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.09223398e+05</span><span class="p">],</span>
   <span class="p">[</span> <span class="mf">4.90471840e+00</span><span class="p">,</span>  <span class="mf">1.16423714e+02</span><span class="p">,</span>  <span class="mf">1.96296662e+06</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">5.48877380e+02</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.48524844e+04</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.09255164e+05</span><span class="p">],</span>
   <span class="p">[</span><span class="o">-</span><span class="mf">2.63994102e+01</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.50429443e+02</span><span class="p">,</span>  <span class="mf">3.06906050e+06</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">1.17046619e+03</span><span class="p">,</span> <span class="o">-</span><span class="mf">6.76924219e+04</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.34773391e+05</span><span class="p">]])</span>

<span class="n">Note</span> <span class="n">that</span> <span class="n">this</span> <span class="n">would</span> <span class="n">correspond</span> <span class="n">to</span> <span class="n">an</span> <span class="n">index</span> <span class="n">of</span> <span class="mi">29</span> <span class="n">within</span> <span class="n">the</span>
<span class="n">field</span><span class="o">.</span> <span class="n">Be</span> <span class="n">aware</span> <span class="n">that</span> <span class="n">scoping</span> <span class="n">IDs</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">sequential</span><span class="o">.</span> <span class="n">You</span> <span class="n">would</span>
<span class="n">get</span> <span class="n">the</span> <span class="n">index</span> <span class="n">of</span> <span class="n">element</span> <span class="mi">29</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">field</span> <span class="k">with</span><span class="p">:</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">field</span><span class="o">.</span><span class="n">scoping</span><span class="o">.</span><span class="n">ids</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="mi">29</span>

<span class="n">Here</span> <span class="n">the</span> <span class="n">data</span> <span class="k">for</span> <span class="n">the</span> <span class="n">element</span> <span class="k">with</span> <span class="n">ID</span> <span class="mi">10</span> <span class="ow">is</span> <span class="n">made</span> <span class="n">of</span> <span class="mi">8</span> <span class="n">symmetrical</span> <span class="n">tensors</span><span class="o">.</span>
<span class="n">The</span> <span class="n">elastic</span> <span class="n">strain</span> <span class="n">has</span> <span class="n">one</span> <span class="n">tensor</span> <span class="n">value</span> <span class="n">by</span> <span class="n">node</span> <span class="n">by</span> <span class="n">element</span> <span class="p">(</span><span class="n">ElementalNodal</span> <span class="n">location</span><span class="p">)</span>

<span class="n">To</span> <span class="n">get</span> <span class="n">the</span> <span class="n">displacement</span> <span class="n">on</span> <span class="n">node</span> <span class="mi">3</span><span class="p">,</span> <span class="n">you</span> <span class="n">would</span> <span class="n">use</span><span class="p">:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">disp</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">displacement</span><span class="o">.</span><span class="n">eval</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">disp</span><span class="o">.</span><span class="n">get_entity_data_by_id</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">array</span><span class="p">([[</span><span class="mf">8.06571808e-14</span><span class="p">,</span> <span class="mf">4.03580652e-04</span><span class="p">,</span> <span class="mf">2.61804706e-05</span><span class="p">]])</span>

<span class="n">One</span> <span class="mi">3</span><span class="n">D</span> <span class="n">vector</span> <span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span><span class="p">)</span> <span class="n">displacement</span>
</pre></div>
</div>
<p>While these methods are acceptable when requesting data for a few elements
or nodes, they should not be used when looping over the entire array. For efficiency,
a field’s data can be recovered locally before sending a large number of requests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">field</span><span class="o">.</span><span class="n">as_local_field</span><span class="p">()</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">f</span><span class="o">.</span><span class="n">get_entity_data_by_id</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="operate-on-field-data">
<h2>Operate on field data<a class="headerlink" href="#operate-on-field-data" title="Permalink to this heading">#</a></h2>
<p>Oftentimes, you do not need to directly act on the data of an array within
Python. For example, if you want to know the maximum of the data, you can
use the <code class="docutils literal notranslate"><span class="pre">array.max()</span></code> method to compute the maximum of the array with the
<code class="docutils literal notranslate"><span class="pre">numpy</span></code> package. However, this requires sending the entire array to Python
and then computing the maximum there. Rather than copying the array over and
computing the maximum in Python, you can instead compute the maximum directly
from the field itself.</p>
<p>This example uses the <code class="docutils literal notranslate"><span class="pre">min_max</span></code> operator to compute the maximum of
the field while returning the field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Compute</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">of</span> <span class="n">the</span> <span class="n">field</span> <span class="n">within</span> <span class="n">DPF</span> <span class="ow">and</span> <span class="k">return</span> <span class="n">the</span> <span class="n">result</span>
<span class="ow">in</span> <span class="n">a</span> <span class="n">numpy</span> <span class="n">array</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">max_field</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">max_field</span><span class="o">.</span><span class="n">data</span>
<span class="n">array</span><span class="p">([</span><span class="mf">0.12492393</span><span class="p">,</span> <span class="mf">0.06738043</span><span class="p">,</span> <span class="mf">0.05854268</span><span class="p">,</span> <span class="mf">0.05807593</span><span class="p">,</span> <span class="mf">0.08250141</span><span class="p">,</span>
   <span class="mf">0.2068032</span> <span class="p">])</span>

<span class="n">Get</span> <span class="n">the</span> <span class="n">element</span> <span class="ow">or</span> <span class="n">node</span> <span class="n">ID</span> <span class="n">of</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">value</span><span class="o">.</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">max_field</span><span class="o">.</span><span class="n">scoping</span><span class="o">.</span><span class="n">ids</span>
<span class="p">[</span><span class="mi">369</span><span class="p">,</span> <span class="mi">1073</span><span class="p">,</span> <span class="mi">1031</span><span class="p">,</span> <span class="mi">1040</span><span class="p">,</span> <span class="mi">2909</span><span class="p">,</span> <span class="mi">2909</span><span class="p">]</span>
</pre></div>
</div>
<p>This example uses the <code class="docutils literal notranslate"><span class="pre">elemental_mean</span></code> operator to compute the
average of a field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansys.dpf.core</span> <span class="kn">import</span> <span class="n">operators</span> <span class="k">as</span> <span class="n">ops</span>
<span class="n">avg_op</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">averaging</span><span class="o">.</span><span class="n">elemental_mean</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
<span class="n">avg_field</span> <span class="o">=</span> <span class="n">avg_op</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">avg_field</span><span class="o">.</span><span class="n">get_entity_data</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">avg_field</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[[ 4.65393066e-04 -2.47955322e-05  0.00000000e+00  7.68026390e+02
  -7.59655688e+04  0.00000000e+00]]
Elemental
</pre></div>
</div>
<p>For comprehensive information on chaining operators, see <a class="reference internal" href="operators.html#ref-user-guide-operators"><span class="std std-ref">Operators</span></a>.</p>
</section>
<section id="api-reference">
<h2>API reference<a class="headerlink" href="#api-reference" title="Permalink to this heading">#</a></h2>
<p>For more information, see <span class="xref std std-ref">ref_fields_container</span> and
<span class="xref std std-ref">ref_field</span> in the <strong>API reference</strong>.</p>
</section>
</section>


              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright (c) 2023 ANSYS, Inc. All rights reserved.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Distributed mode superposition (MSUP) &#8212; PyDPF-Core</title>
    
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css\ansys_sphinx_theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    
        <link href="../../_static/css/breadcrumbs.css" rel="stylesheet">
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../../_static/ansys-favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Distributed MSUP distributed modal response" href="03-distributed-msup_expansion_steps.html" />
    <link rel="prev" title="Create a custom workflow on distributed processes" href="01-distributed_workflows_on_remote.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    <img src="../../_static/pyansys-logo-black-cropped.png" class="logo__image only-light" alt="Logo image">
    <img src="../../_static/pyansys-logo-black-cropped.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../getting_started/index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../user_guide/index.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../concepts/index.html">
  Concepts
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api/index.html">
  API reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../operator_reference.html">
  Operators
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../contributing.html">
  Contribute
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        dev  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables examples/06-distributed-post/02-distributed-msup_expansion and {'json_url': 'https://nocname.com/release/versions.json', 'version_match': 'dev'}.
-->

<script type="text/javascript">
// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "examples/06-distributed-post/02-distributed-msup_expansion.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://nocname.com/release/versions.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "examples/06-distributed-post/02-distributed-msup_expansion.html";
        let btn = document.getElementById("version_switcher_button");
        // Set empty strings by default so that these attributes exist and can be used in CSS selectors
        btn.dataset["activeVersionName"] = "";
        btn.dataset["activeVersion"] = "";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            // Add dataset values for the version and name in case people want
            // to apply CSS styling based on this information.
            node.dataset["versionName"] = entry.name;
            node.dataset["version"] = entry.version;

            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's 0.7.3.dev0 variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "dev") {
                node.classList.add("active");
                btn.innerText = btn.dataset["activeVersionName"] = entry.name;
                btn.dataset["activeVersion"] = entry.version;
            }
        });
    });
})();
</script>
      </div>
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/pydpf-core" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    
     
<div id="announcement_msg"></div>
<script>
  fetch("announcement.html")
    .then((response) => {
      if (!response.ok) {
        throw new Error(`HTTP error: ${response.status}`);
      }
      return response.text();
    })
    .then(text => document.getElementById("announcement_msg").innerHTML = text)
    .catch((error) => console.error(`Fetch problem: ${error.message}`));
</script>

    
        <div class="container-xl">
    <div class="row">
        <div class="col-12 col-md-3" id="breadcrumbs-spacer"></div>
        <div class="col-12 col-md-11 col-xl-9" id="breadcrumbs">
          
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    
        <li class="nav-item nav-item-additional-breadcrumb"><a href="https://docs.pyansys.com/">PyAnsys</a> » </li>
    
    
        <li class="nav-item nav-item-0"><a href="../../index.html">PyDPF-Core</a> » </li>
    

          <li class="nav-item nav-item-1"><a href="../index.html" >Examples</a> » </li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Examples for postprocessing on distributed processes</a> » </li>
        <li class="nav-item nav-item-this"><a href="">Distributed mode superposition (MSUP)</a></li> 
      </ul>
    </div>
        </div>
  </div>
</div>
    


    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../00-basic/index.html">
   Basic DPF examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../00-basic/00-basic_example.html">
     Basic DPF-Core usage
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00-basic/01-basic_operators.html">
     Operators overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00-basic/02-basic_field_containers.html">
     Field and field containers overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00-basic/03-create_entities.html">
     Create your own entities using DPF operators
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00-basic/05-use_local_data.html">
     Bring a field’s data locally to improve performance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00-basic/07-use_result_helpers.html">
     Use result helpers to load custom data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00-basic/08-results_over_time_subset.html">
     Scope results over custom time domains
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00-basic/09-results_over_space_subset.html">
     Scope results over custom space domains
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00-basic/11-server_types.html">
     Communicate in process or via gRPC
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00-basic/12-get_material_properties.html">
     Get material properties from the result file
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01-transient_analyses/index.html">
   Transient analysis examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-transient_analyses/00-basic_transient.html">
     Transient analysis result example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-transient_analyses/01-transient_easy_time_scoping.html">
     Choose a time scoping for a transient analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-transient_analyses/02-lsdyna_operators.html">
     Results extraction and analysis from LS-DYNA sources
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02-modal-harmonic/index.html">
   Harmonic analysis examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-modal-harmonic/00-multi_harmonic.html">
     Multi-harmonic response example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-modal-harmonic/01-modal_cyclic.html">
     Modal cyclic symmetry example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-modal-harmonic/02-cyclic_multi_stage.html">
     Multi-stage cyclic symmetry example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-modal-harmonic/03-compare_modes.html">
     Use Result Helpers to compare mode shapes for solids and then shells
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-modal-harmonic/04-modal_superposition.html">
     Expand harmonic modal superposition with DPF
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-modal-harmonic/05-read_distributed_files.html">
     Read results from distributed files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-modal-harmonic/06-cycles_to_failure.html">
     Calculate the number of cycles to fatigue failure
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03-advanced/index.html">
   Advanced and miscellaneous examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-advanced/00-multistage_advanced_options.html">
     Multi-stage cyclic symmetry using advanced customization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-advanced/01-solve_harmonic_problem.html">
     Solve harmonic problem (with damping) using matrix inverse
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-advanced/02-volume_averaged_stress.html">
     Average elemental stress on a given volume
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-advanced/03-exchange_data_between_servers.html">
     Exchange data between servers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-advanced/04-extrapolation_stress_3d.html">
     Extrapolation method for stress result of a 3D element
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-advanced/05-extrapolation_strain_2d.html">
     Extrapolation method for strain result of a 2D element
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-advanced/06-stress_gradient_path.html">
     Stress gradient normal to a defined node
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-advanced/07-load_plugin.html">
     Load plugin
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-advanced/10-asme_secviii_divtwo.html">
     Pressure vessel analysis according to an ASME standard
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../04-file-IO/index.html">
   File manipulation and input-output examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../04-file-IO/00-hdf5_double_float_comparison.html">
     HDF5 export and compare precision
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04-file-IO/01-reduced_matrices_export.html">
     Get reduced matrices and make export
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04-file-IO/04-basic-load-file.html">
     Working with a result file
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05-plotting/index.html">
   Plotting examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05-plotting/00-basic_plotting.html">
     Review of available plotting commands
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05-plotting/01-compare_results.html">
     Compare results using the plotter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05-plotting/02-solution_combination.html">
     Load case combination for principal stress
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05-plotting/03-labels.html">
     Add nodal labels on plots
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05-plotting/04-plot_on_path.html">
     Plot results on a specific path
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05-plotting/05-plot_on_warped_mesh.html">
     Warp the mesh by a field for plotting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05-plotting/06-animate_results.html">
     Review of available animation commands
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05-plotting/07-plot_on_geometries.html">
     Plot on geometry elements
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Examples for postprocessing on distributed processes
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="00-distributed_total_disp.html">
     Postprocessing of displacement on distributed processes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="01-distributed_workflows_on_remote.html">
     Create a custom workflow on distributed processes
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Distributed mode superposition (MSUP)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="03-distributed-msup_expansion_steps.html">
     Distributed MSUP distributed modal response
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="06-distributed_stress_averaging.html">
     Average Stress in distributed Workflows
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../07-python-operators/index.html">
   Examples of creating custom operator plugins
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../07-python-operators/00-wrapping_numpy_capabilities.html">
     Create a basic operator plugin
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07-python-operators/01-package_python_operators.html">
     Create a plug-in package with multiple operators
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07-python-operators/02-python_operators_with_dependencies.html">
     Create a plug-in package that has third-party dependencies
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../08-averaging/index.html">
   Averaging examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../08-averaging/00-compute_and_average.html">
     Averaging order
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08-averaging/01-average_across_bodies.html">
     Average across bodies
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../09-mesh_operations/index.html">
   Mesh operations examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../09-mesh_operations/00-create_polygons_and_polyhedrons.html">
     Create and display a mesh with polygon and polyhedron elements
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09-mesh_operations/05-skin_extraction.html">
     Extract the skin from a mesh
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09-mesh_operations/13-nodes_in_local_coordinate_system.html">
     Convert nodal coordinates field to local coordinate system
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Distributed mode superposition (MSUP)
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#configure-the-servers">
   Configure the servers
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-operators-on-each-server">
   Create operators on each server
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-local-operator-chain-for-expansion">
   Create a local operator chain for expansion
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#connect-the-operator-chains-together-and-get-the-output">
   Connect the operator chains together and get the output
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-06-distributed-post-02-distributed-msup-expansion-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="distributed-mode-superposition-msup">
<span id="ref-distributed-msup"></span><span id="sphx-glr-examples-06-distributed-post-02-distributed-msup-expansion-py"></span><h1>Distributed mode superposition (MSUP)<a class="headerlink" href="#distributed-mode-superposition-msup" title="Permalink to this heading">#</a></h1>
<p>This example shows how to read and expand distributed files
on distributed processes. The modal basis (two distributed files) is read
on two remote servers. The modal response is then read and expanded on a
third server.</p>
<p>The following diagram helps you to understand this example. It shows the operator
chain that is used to compute the final result.</p>
<div class="graphviz"><img src="../../_images/graphviz-af827a7e4d4676d60b41e2ec2f41cc5179d91308.png" alt="digraph foo {
    graph [pad=&quot;0&quot;, nodesep=&quot;0.3&quot;, ranksep=&quot;0.3&quot;]
    node [shape=box, style=filled, fillcolor=&quot;#ffcc00&quot;, margin=&quot;0&quot;];
    rankdir=LR;
    splines=line;

    disp01 [label=&quot;displacement&quot;];
    disp02 [label=&quot;displacement&quot;];
    mesh01 [label=&quot;mesh&quot;];
    mesh02 [label=&quot;mesh&quot;];

    subgraph cluster_1 {
        ds01 [label=&quot;data_src&quot;, shape=box, style=filled, fillcolor=cadetblue2];

        disp01; mesh01;

        ds01 -&gt; disp01 [style=dashed];
        ds01 -&gt; mesh01 [style=dashed];

        label=&quot;Server 1&quot;;
        style=filled;
        fillcolor=lightgrey;
    }

    subgraph cluster_2 {
        ds02 [label=&quot;data_src&quot;, shape=box, style=filled, fillcolor=cadetblue2];


        disp02; mesh02;

        ds02 -&gt; disp02 [style=dashed];
        ds02 -&gt; mesh02 [style=dashed];

        label=&quot;Server 2&quot;;
        style=filled;
        fillcolor=lightgrey;
    }

    disp01 -&gt; &quot;merge_fields&quot;;
    mesh01 -&gt; &quot;merged_mesh&quot;;
    disp02 -&gt; &quot;merge_fields&quot;;
    mesh02 -&gt; &quot;merged_mesh&quot;;

    ds03 [label=&quot;data_src&quot;, shape=box, style=filled, fillcolor=cadetblue2];
    ds03 -&gt; &quot;response&quot; [style=dashed];

    &quot;merged_mesh&quot; -&gt; &quot;response&quot;;
    &quot;response&quot; -&gt; &quot;expansion&quot;;
    &quot;merge_fields&quot; -&gt; &quot;expansion&quot;;
    &quot;expansion&quot; -&gt; &quot;component&quot;;
}" class="graphviz" /></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example requires the Premium ServerContext.
For more information, see <a class="reference internal" href="../../user_guide/server_context.html#user-guide-server-context"><span class="std std-ref">Server context</span></a>.</p>
</div>
<p>Import the <code class="docutils literal notranslate"><span class="pre">dpf-core</span></code> module and its examples files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansys.dpf</span> <span class="kn">import</span> <span class="n">core</span> <span class="k">as</span> <span class="n">dpf</span>
<span class="kn">from</span> <span class="nn">ansys.dpf.core</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="kn">from</span> <span class="nn">ansys.dpf.core</span> <span class="kn">import</span> <span class="n">operators</span> <span class="k">as</span> <span class="n">ops</span>


<span class="n">dpf</span><span class="o">.</span><span class="n">set_default_server_context</span><span class="p">(</span><span class="n">dpf</span><span class="o">.</span><span class="n">AvailableServerContexts</span><span class="o">.</span><span class="n">premium</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="configure-the-servers">
<h1>Configure the servers<a class="headerlink" href="#configure-the-servers" title="Permalink to this heading">#</a></h1>
<p>Make a list of IP addresses and port numbers that DPF servers start and
listen on. Operator instances are created on each of these servers so that
each server can address a different result file.</p>
<p>This example postprocesses an analysis distributed in two files.
Consequently, it requires two remote processes.</p>
<p>To make it easier, this example starts local servers. However, you can
connect to any existing servers on your network.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">global_server</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">start_local_server</span><span class="p">(</span>
    <span class="n">as_global</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">dpf</span><span class="o">.</span><span class="n">AvailableServerConfigs</span><span class="o">.</span><span class="n">InProcessServer</span>
<span class="p">)</span>

<span class="n">remote_servers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">dpf</span><span class="o">.</span><span class="n">start_local_server</span><span class="p">(</span>
        <span class="n">as_global</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">dpf</span><span class="o">.</span><span class="n">AvailableServerConfigs</span><span class="o">.</span><span class="n">GrpcServer</span>
    <span class="p">),</span>
    <span class="n">dpf</span><span class="o">.</span><span class="n">start_local_server</span><span class="p">(</span>
        <span class="n">as_global</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">dpf</span><span class="o">.</span><span class="n">AvailableServerConfigs</span><span class="o">.</span><span class="n">GrpcServer</span>
    <span class="p">),</span>
<span class="p">]</span>
<span class="n">ips</span> <span class="o">=</span> <span class="p">[</span><span class="n">remote_server</span><span class="o">.</span><span class="n">ip</span> <span class="k">for</span> <span class="n">remote_server</span> <span class="ow">in</span> <span class="n">remote_servers</span><span class="p">]</span>
<span class="n">ports</span> <span class="o">=</span> <span class="p">[</span><span class="n">remote_server</span><span class="o">.</span><span class="n">port</span> <span class="k">for</span> <span class="n">remote_server</span> <span class="ow">in</span> <span class="n">remote_servers</span><span class="p">]</span>
</pre></div>
</div>
<p>Print the IP addresses and ports.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ips:&quot;</span><span class="p">,</span> <span class="n">ips</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ports:&quot;</span><span class="p">,</span> <span class="n">ports</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>ips: [&#39;127.0.0.1&#39;, &#39;127.0.0.1&#39;]
ports: [50054, 50055]
</pre></div>
</div>
<p>Specify the file path.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">base_path</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">find_distributed_msup_folder</span><span class="p">()</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">base_path</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;/file0.mode&quot;</span><span class="p">,</span> <span class="n">base_path</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;/file1.mode&quot;</span><span class="p">]</span>
<span class="n">files_aux</span> <span class="o">=</span> <span class="p">[</span><span class="n">base_path</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;/file0.rst&quot;</span><span class="p">,</span> <span class="n">base_path</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;/file1.rst&quot;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="create-operators-on-each-server">
<h1>Create operators on each server<a class="headerlink" href="#create-operators-on-each-server" title="Permalink to this heading">#</a></h1>
<p>On each server, create two operators, one for displacement computations
and one for providing the mesh. Then, define their data sources. Both the
displacement operator and mesh provider operator receive data from their
respective data files on each server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">remote_displacement_operators</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">remote_mesh_operators</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">server</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">remote_servers</span><span class="p">):</span>
    <span class="n">displacement</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">displacement</span><span class="p">(</span><span class="n">server</span><span class="o">=</span><span class="n">server</span><span class="p">)</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">mesh_provider</span><span class="p">(</span><span class="n">server</span><span class="o">=</span><span class="n">server</span><span class="p">)</span>
    <span class="n">remote_displacement_operators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">displacement</span><span class="p">)</span>
    <span class="n">remote_mesh_operators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mesh</span><span class="p">)</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">DataSources</span><span class="p">(</span><span class="n">files</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">server</span><span class="o">=</span><span class="n">server</span><span class="p">)</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">add_file_path</span><span class="p">(</span><span class="n">files_aux</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">displacement</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">data_sources</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
    <span class="n">mesh</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">data_sources</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="create-a-local-operator-chain-for-expansion">
<h1>Create a local operator chain for expansion<a class="headerlink" href="#create-a-local-operator-chain-for-expansion" title="Permalink to this heading">#</a></h1>
<p>The following series of operators merge the modal basis and the meshes, read
the modal response, and expand the modal response with the modal basis.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">merge_fields</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">merge_fields_containers</span><span class="p">()</span>
<span class="n">merge_mesh</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">merge_meshes</span><span class="p">()</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">DataSources</span><span class="p">(</span><span class="n">base_path</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;/file_load_1.rfrq&quot;</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">displacement</span><span class="p">(</span><span class="n">data_sources</span><span class="o">=</span><span class="n">ds</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mesh</span><span class="p">(</span><span class="n">merge_mesh</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">merges_mesh</span><span class="p">)</span>

<span class="n">expansion</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">modal_superposition</span><span class="p">(</span>
    <span class="n">solution_in_modal_space</span><span class="o">=</span><span class="n">response</span><span class="p">,</span> <span class="n">modal_basis</span><span class="o">=</span><span class="n">merge_fields</span>
<span class="p">)</span>
<span class="n">component</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">logic</span><span class="o">.</span><span class="n">component_selector_fc</span><span class="p">(</span><span class="n">expansion</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="connect-the-operator-chains-together-and-get-the-output">
<h1>Connect the operator chains together and get the output<a class="headerlink" href="#connect-the-operator-chains-together-and-get-the-output" title="Permalink to this heading">#</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">server</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">remote_servers</span><span class="p">):</span>
    <span class="n">merge_fields</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">remote_displacement_operators</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">merge_mesh</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">remote_mesh_operators</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">fc</span> <span class="o">=</span> <span class="n">component</span><span class="o">.</span><span class="n">get_output</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dpf</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">fields_container</span><span class="p">)</span>
<span class="n">merged_mesh</span> <span class="o">=</span> <span class="n">merge_mesh</span><span class="o">.</span><span class="n">get_output</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dpf</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">meshed_region</span><span class="p">)</span>

<span class="n">merged_mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fc</span><span class="o">.</span><span class="n">get_field_by_time_complex_ids</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">merged_mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fc</span><span class="o">.</span><span class="n">get_field_by_time_complex_ids</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span>
</pre></div>
</div>
<ul class="sphx-glr-horizontal">
<li><img src="../../_images/sphx_glr_02-distributed-msup_expansion_001.png" srcset="../../_images/sphx_glr_02-distributed-msup_expansion_001.png" alt="02 distributed msup expansion" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_02-distributed-msup_expansion_002.png" srcset="../../_images/sphx_glr_02-distributed-msup_expansion_002.png" alt="02 distributed msup expansion" class = "sphx-glr-multi-img"/></li>
</ul>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF  Fields Container
  with 20 field(s)
  defined on labels: complex time

  with:
  - field 0 {complex:  0, time:  1} with Nodal location, 1 components and 1065 entities.
  - field 1 {complex:  1, time:  1} with Nodal location, 1 components and 1065 entities.
  - field 2 {complex:  0, time:  2} with Nodal location, 1 components and 1065 entities.
  - field 3 {complex:  1, time:  2} with Nodal location, 1 components and 1065 entities.
  - field 4 {complex:  0, time:  3} with Nodal location, 1 components and 1065 entities.
  - field 5 {complex:  1, time:  3} with Nodal location, 1 components and 1065 entities.
  - field 6 {complex:  0, time:  4} with Nodal location, 1 components and 1065 entities.
  - field 7 {complex:  1, time:  4} with Nodal location, 1 components and 1065 entities.
  - field 8 {complex:  0, time:  5} with Nodal location, 1 components and 1065 entities.
  - field 9 {complex:  1, time:  5} with Nodal location, 1 components and 1065 entities.
  - field 10 {complex:  0, time:  6} with Nodal location, 1 components and 1065 entities.
  - field 11 {complex:  1, time:  6} with Nodal location, 1 components and 1065 entities.
  - field 12 {complex:  0, time:  7} with Nodal location, 1 components and 1065 entities.
  - field 13 {complex:  1, time:  7} with Nodal location, 1 components and 1065 entities.
  - field 14 {complex:  0, time:  8} with Nodal location, 1 components and 1065 entities.
  - field 15 {complex:  1, time:  8} with Nodal location, 1 components and 1065 entities.
  - field 16 {complex:  0, time:  9} with Nodal location, 1 components and 1065 entities.
  - field 17 {complex:  1, time:  9} with Nodal location, 1 components and 1065 entities.
  - field 18 {complex:  0, time:  10} with Nodal location, 1 components and 1065 entities.
  - field 19 {complex:  1, time:  10} with Nodal location, 1 components and 1065 entities.
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  3.816 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-06-distributed-post-02-distributed-msup-expansion-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/da1eb8703910f110296ff8ca83dc5420/02-distributed-msup_expansion.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">02-distributed-msup_expansion.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/3a78338ad24cce450d74e74d1477f56d/02-distributed-msup_expansion.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">02-distributed-msup_expansion.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright (c) 2022 ANSYS, Inc. All rights reserved.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>